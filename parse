#!/usr/bin/env php
<?php
require __DIR__ . '/vendor/autoload.php';

/**
 * $argv[0] - Команда
 * $argv[1] - Ссылка
 * $argv[N>1] - Не беру во внимание.
 */
$link = $argv[1];
if ($argc < 2) {
    echo 'Введите ссылку: ';
    fscanf(STDIN, "%s\n", $link);
}


/**
 * Проблемы в ходе работы:
 * - Не работает с теми сайтами где есть Preloader. (Изза быстрого сбора информации)
 *
 */


# DEMO LINKS
//$link = 'http://salad.marketing/'; # Имеет прилоадер
//$link = 'http://ss.loc/';
//$link = 'https://solerasinks.com/';
//$link = 'http://ss.loc/projects';


/**
 * Записал LINK.
 * - ОБработал классом по URL.
 * - Создал базовую директорию
 * - Подключил класс по файлам. Указал базовую директорию
 */
$parse = new Src\Parser\Parse($link);

/**
 * Сканер по указаной ссылке - получает все ссылки
 * Записал CollectionImages;
 */

$parse->setAllLinks();# Объязательно

/**
 * Сохраняет файлы. Выгружает их в базовую папку. Сохраняя их путь(по ссылке)
 * Можно отключить(закомментировать)
 */

$parse->saveHTMLPages();# (МОЖНО ОТКЛЮЧИТЬ)

/**
 * Сохраняет изображения. Выгружает их в базовую папку. Сохраняя их путь(по ссылке)
 */

$parse->saveImages();# Создает по базовом пути все изображения сохраняя их путь с ссылки

/**
 * Создает файл документ. Нужен для Рапорта.
 */

$parse->createDocument();


exit(200);